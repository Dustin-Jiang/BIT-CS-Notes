## 数据通路基本结构

在分析微操作序列前，需明确 CPU 的硬件结构。以经典的单总线结构 CPU 为例，寄存器通常包含输入门（$X_{in}$ 或 $X_{E}$）和输出门（$X_{out}$）。

## 微操作序列实例: `ADD @R0, R1`

该指令的功能是将 $R0$ 指向的主存单元内容与 $R1$ 的内容相加，结果写回该主存单元。

### 1. 取指公共操作
取指阶段对所有指令是通用的。 #重点

- **T1**: $PC_{out}, MAR_{in}, Read, Y_{in}(0), C_0=1, ALU_{add}, Z_{in}$
  - 发出访存地址的同时，利用 ALU 完成 $PC + 1$ 的并行计算。
- **T2**: $Z_{out}, PC_{in}, Wait(MFC)$
  - 修改 $PC$ 的值，并等待存储器完成读取。
- **T3**: $MDR_{out}, IR_{in}$
  - 将指令送入指令寄存器。

### 2. 分析与执行阶段

- **T4**: $R0_{out}, MAR_{in}, Read$
  - 将 $R0$ 的内容（间接地址）送入 $MAR$ 并启动读操作。
- **T5**: $R1_{out}, Y_{in}, Wait(MFC)$
  - 将 $R1$ 的内容送入 ALU 暂存器 $Y$，等待操作数读出。
- **T6**: $MDR_{out}, ALU_{add}, Z_{in}$
  - 完成加法运算。
- **T7**: $Z_{out}, MDR_{in}$
- **T8**: $Write, Wait(MFC)$
  - 将结果写回主存单元。

## 关键结论

- **硬件决定软件**: CPU 的内部硬件连接方式决定了微操作序列的编写。 #重点
- **微命令与微操作**: 微命令（如 $PC_{out}$）是逻辑描述，微操作是硬件动作。
